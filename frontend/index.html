<!DOCTYPE html>
<html>
<head>
  <title>TP CI/CD</title>
  <style>body{font-family:Arial;text-align:center;padding:50px;background:#f0f8ff}</style>
</head>
<body>
  <h1>TP CI/CD â€“ Frontend + Backend</h1>
  <p id="result">Chargement...</p>

  <script>
    const API_URL = window.location.hostname.includes('vercel') 
      ? 'https://tp-cicd-backend.onrender.com' 
      : 'http://localhost:3000';

    fetch(`${API_URL}/api`)
      .then(r => r.json())
      .then(data => {
        document.getElementById('result').innerHTML = `
          <pre style="background:#e0ffe0;padding:20px;border-radius:10px">
${JSON.stringify(data, null, 2)}
          </pre>
        `;
      })
      .catch(() => {
        document.getElementById('result').textContent = "Backend non joignable";
      });
  </script>
</body>
</html>